---
import { Github, Menu } from 'lucide-astro';
---

<nav class="fixed top-0 left-0 right-0 z-50 bg-dark border-b border-gray-800">
  <div class="max-w-7xl mx-auto px-6 sm:px-8 lg:px-12">
    <div class="flex justify-between items-center h-20">
      <a href="/" class="flex items-center" transition:name="logo">
        <img src="/images/logo.png" alt="GreenFlux Logo" loading="eager" fetchpriority="high" class="h-10" />
      </a>

      <div class="hidden md:flex items-center space-x-8">
        <a href="#home" class="text-green-primary hover:text-green-bright transition-colors nav-link-animated">Home</a>
        <a href="#portfolio" class="text-green-primary hover:text-green-bright transition-colors nav-link-animated">Portfolio</a>
        <a href="#about" class="text-green-primary hover:text-green-bright transition-colors nav-link-animated">About</a>
        <a href="#social" class="text-green-primary hover:text-green-bright transition-colors nav-link-animated">Social</a>
        <a href="https://blog.greenflux.us" target="_blank" rel="noopener noreferrer" class="px-6 py-2 bg-green-primary hover:bg-green-bright text-darker font-bold rounded transition-all duration-300">
          BLOG
        </a>
        <a href="https://github.com/GreenFlux" target="_blank" rel="noopener noreferrer" class="text-text-primary hover:text-green-primary transition-colors" aria-label="GitHub Profile">
          <Github class="w-8 h-8" />
        </a>
      </div>

      <button id="mobile-menu-button" class="md:hidden text-text-primary hover:text-green-primary transition-colors" aria-label="Toggle mobile menu" aria-expanded="false">
        <Menu class="w-6 h-6" />
      </button>
    </div>
  </div>

  <div id="mobile-menu" class="hidden md:hidden bg-darker border-t border-gray-800">
    <div class="px-4 py-4 space-y-3">
      <a href="#home" class="block text-green-primary hover:text-green-bright transition-colors py-2">Home</a>
      <a href="#portfolio" class="block text-green-primary hover:text-green-bright transition-colors py-2">Portfolio</a>
      <a href="#about" class="block text-green-primary hover:text-green-bright transition-colors py-2">About</a>
      <a href="#social" class="block text-green-primary hover:text-green-bright transition-colors py-2">Social</a>
      <a href="https://blog.greenflux.us" target="_blank" rel="noopener noreferrer" class="block px-6 py-2 bg-green-primary hover:bg-green-bright text-darker font-bold rounded transition-all duration-300 text-center">
        BLOG
      </a>
      <a href="https://github.com/GreenFlux" target="_blank" rel="noopener noreferrer" class="flex items-center text-text-primary hover:text-green-primary transition-colors py-2">
        <Github class="w-5 h-5 mr-2" /> GitHub
      </a>
    </div>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    menuButton?.addEventListener('click', () => {
      const isHidden = mobileMenu?.classList.toggle('hidden');
      menuButton?.setAttribute('aria-expanded', isHidden ? 'false' : 'true');
    });

    const mobileLinks = mobileMenu?.querySelectorAll('a');
    mobileLinks?.forEach(link => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.add('hidden');
        menuButton?.setAttribute('aria-expanded', 'false');
      });
    });
  });
</script>
